<!--
===========================================================
Program: Main HTML Template
Programmer/s: Cristina C. Villasor
Date Written: Sept. 4, 2025
Last Revised: Oct. 14, 2025

Purpose: Defines web interface for content moderation and is use to take input and display output.

Program Fits in the General System Design:
- Frontend interface for user interaction
- Takes result from backend and displays it to user
===========================================================
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Moderation</title>
    <link
      href="{{ url_for('static', filename='css/output.css') }}"
      rel="stylesheet"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Readex+Pro:wght@160..700&display=swap");
    </style>
  </head>
  <body>
    <nav
      class="p-4 bg-white flex justify-between font-lato fixed w-full z-20 top-0 left-0 border-b border-b-gray-100 shadow-sm"
    >
      <p class="text-black">Content Moderation</p>
      <ul id="nav-link" class="flex justify-end gap-5 text-black"></ul>
    </nav>

    <section id="home" class="container-full flex flex-col">
      <p class="font-bold text-5xl/13 mt-10 text-center p-2">
        A Region-Based Convolutional Neural Network Approach to Detecting
        <span class="text-indigo-500">Harmful Cloaked Content</span> for
        Automated <span class="text-indigo-500">Content Moderation</span>
      </p>
      <p class="p-2 text-sm text-center font-light text-gray-600">
        Strengthening Faster R-CNN against adversarial attacks to ensure
        reliable and secure automated content moderation in <br />
        digital platforms.
      </p>

      <div
        class="button flex flex-row justify-center gap-5 mt-10 bg-indigo-500 text-white hover:bg-indigo-600 text-center m-auto rounded-full w-50 p-2"
      >
        <a href="#try-now" class="font-bold">TRY NOW </a>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-move-right-icon lucide-move-right font-bold"
        >
          <path d="M18 8L22 12L18 16" />
          <path d="M2 12H22" />
        </svg>
      </div>
    </section>

    <!-- Features banner -->
    <div
      class="features flex flex-row gap-10 pl-20 pr-20 pt-5 pb-5 bg-indigo-500 mt-20"
    >
      <div class="robust flex flex-col justify-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="50"
          height="50"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-shield-icon lucide-shield m-auto text-white"
        >
          <path
            d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"
          />
        </svg>
        <p class="text-white mt-2 font-light text-center">
          Protects users from inappropriate content
        </p>
      </div>
      <div class="ml">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="50"
          height="50"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-brain-icon lucide-brain m-auto text-white"
        >
          <path d="M12 18V5" />
          <path d="M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4" />
          <path d="M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5" />
          <path d="M17.997 5.125a4 4 0 0 1 2.526 5.77" />
          <path d="M18 18a4 4 0 0 0 2-7.464" />
          <path d="M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517" />
          <path d="M6 18a4 4 0 0 1-2-7.464" />
          <path d="M6.003 5.125a4 4 0 0 0-2.526 5.77" />
        </svg>
        <p class="text-white mt-2 font-light text-center">
          Powered by Faster R-CNN architecture
        </p>
      </div>
      <div class="cleaning">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="50"
          height="50"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-brush-cleaning-icon lucide-brush-cleaning m-auto text-white"
        >
          <path d="m16 22-1-4" />
          <path
            d="M19 13.99a1 1 0 0 0 1-1V12a2 2 0 0 0-2-2h-3a1 1 0 0 1-1-1V4a2 2 0 0 0-4 0v5a1 1 0 0 1-1 1H6a2 2 0 0 0-2 2v.99a1 1 0 0 0 1 1"
          />
          <path
            d="M5 14h14l1.973 6.767A1 1 0 0 1 20 22H4a1 1 0 0 1-.973-1.233z"
          />
          <path d="m8 22 1-4" />
        </svg>
        <p class="text-white mt-2 font-light text-center">
          Integrated techniques to cleanse manipulated images before analysis
        </p>
      </div>
    </div>
    
    <section id="about" class="container-full">
      <p
        class="text-4xl/15 font-bold text-center mb-8 border-b-3 border-b-indigo-500 w-fit m-auto"
      >
        About the Project
      </p>
      <div class="border-1 border-indigo-300 shadow-lg rounded-lg p-10">
        <ul class="list-none" id="adv-definition"></ul>
        <ul class="space-y-3 text-gray-800 mb-5" id="adv-type"></ul>
        <div class="grid md:grid-cols-2 gap-10 mt-10">
          <div class="figure-1 col-span-1">
            <img
              src="/static/images/fig1.png"
              alt="Figure 1"
              class="h-60 m-auto"
            />
            <p class="text-center text-sm text-gray-600 mt-2">
              Figure 1. Side by side comparison of a clean and adversarially
              perturbed image. The left image is the clean version and the
              adversarially perturbed version on the right
            </p>
          </div>

          <div class="figure-2 col-span-1">
            <img
              src="/static/images/fig2.png"
              alt="Figure 2"
              class="h-60 m-auto"
            />
            <p class="text-center text-sm text-gray-600 mt-2">
              Figure 2. Side-by-side comparison of a clean (left) and
              adversarially perturbed image (right). The image on the left shows
              the distorted portions of the image after the attack. White lines
              appear to have a lower opacity, a decrease in the saturation, and
              an overall rougher texture.
            </p>
          </div>

          <div class="figure-3 col-span-2">
            <img
              src="/static/images/fig3.png"
              alt="Figure 3"
              class="h-60 m-auto"
            />
            <p class="text-center text-sm text-gray-600 mt-2">
              Figure 3. Before and after results of GoogLeNet (CNN based object
              detection model) when handling adversarial attacks.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="how-to-use" class="container-full">
      <p
        class="text-4xl/15 font-bold text-center mb-3 border-b-3 border-b-indigo-500 w-fit m-auto"
      >
        How to use?
      </p>
      <p class="text-sm text-gray-600 text-center">
        Follow these steps to upload and process your media
      </p>
      <div id="steps" class="grid grid-cols-3 gap-8 mt-12"></div>
    </section>

    <section id="try-now" class="container-full">
      <p
        class="text-4xl/15 font-bold text-center mb-3 border-b-3 border-b-indigo-500 w-fit m-auto"
      >
        Try it!
      </p>
      <p class="text-sm text-gray-600 text-center mb-10">
        Test the model by submitting your media
      </p>
      <div class="grid md:grid-cols-2 gap-10">
        <div class="upload rounded-xl p-7 shadow-lg border-1 border-indigo-200">
          <p class="text-2xl font-semibold mb-6">Upload Image</p>

          <form
            method="POST"
            enctype="multipart/form-data"
            action="{{ url_for('routes.content_moderation') }}"
          >
            {{ form.hidden_tag()}}
            <div
              class="border-2 border-dashed border-indigo-200 rounded-lg p-12 text-center transition-colors hover:border-indigo-500"
            >
              <!-- Image preview area -->
              <img
                id="preview-image"
                src="#"
                alt="Preview"
                class="hidden h-64 w-full"
              />
              <video
                src="#"
                id="preview-video"
                class="hidden h-64 w-full"
                controls
              ></video>
              <!-- Icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="lucide lucide-cloud-upload-icon lucide-cloud-upload h-20 w-20 text-indigo-500 m-auto"
                id="upload-icon"
              >
                <path d="M12 13v8" />
                <path
                  d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"
                />
                <path d="m8 17 4-4 4 4" />
              </svg>
              <p class="font-light text-gray-600" id="upload-label">
                Click to upload
              </p>
              {{form.uploadImg(class="max-w-xs mx-auto block w-full text-sm
              border-1 border-indigo-100 rounded-full mt-3 text-gray-600
              file:mr-4 file:py-2 file:px-4 file:border-0 file:text-sm
              file:font-semibold file:bg-indigo-100 file:text-indigo-700
              hover:file:bg-indigo-200", id="file-upload", type="file",
              onchange="showPreview(event)") }}
            </div>
            <div class="flex justify-end mt-4 space-x-4">
              <!-- Submit button -->
              {{ form.submit(class="bg-indigo-500 hover:bg-indigo-600 text-white
              px-5 py-2 rounded-lg shadow w-full", id="submit-button",
              onclick="submitForm(event)") }}
              <!-- Reset button -->
              {{ form.reset(class="bg-gray-400 hover:bg-gray-500 text-white px-5
              py-2 rounded-lg shadow w-50", id="reset-button", type="button",
              onclick="resetForm(event)") }}
            </div>
          </form>
          {% with messages = get_flashed_messages() %} {% if messages %}
          <div class="alert alert-danger mt-2">{{ messages[0] }}</div>
          {% endif %} {% endwith %}
        </div>
        <div class="result rounded-xl p-7 shadow-lg border-1 border-indigo-200">
          <p class="text-2xl font-semibold mb-6">Result</p>
          <!-- Loading spinner -->
          <div class="result p-12">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="150"
              height="150"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-loader-circle-icon lucide-loader-circle animate-spin text-indigo-500 m-auto hidden"
              id="spinner"
            >
              <path d="M21 12a9 9 0 1 1-6.219-8.56" />
            </svg>
            {% if output_url %} {% set ext = output_url.split('.')[-1].lower()
            %} {% if ext in ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp'] %}
            <img
              src="{{ output_url }}"
              class="h-64 w-full object-contain rounded-lg shadow-md"
              alt="Detected Image"
              id="result-image"
            />
            {% elif ext in ['mp4', 'webm', 'ogg', 'mov'] %}
            <video
              src="{{ output_url }}"
              class="h-64 w-full object-contain rounded-lg shadow-md"
              controls
              autoplay
              loop
              id="result-video"
            ></video>
            {% else %}
            <p class="text-gray-500 text-center mt-3">
              Unsupported media format
            </p>
            {% endif %} {% endif %}

            <!-- Message result -->
            {% if message %}
            <p
              class="normal text-gray-500 text-center mt-3 py-10"
              id="server-message"
            >
              {{ message }}
            </p>
            {% else %}
            <p
              class="text-gray-700 font-light text-center mt-3 py-10"
              id="server-message"
            >
              Results will appear here after analysis
            </p>
            {% endif %}
          </div>
        </div>
      </div>
    </section>

    <section id="authors" class="container-full mb-10">
      <p
        class="text-4xl/15 font-bold text-center mb-3 border-b-3 border-b-indigo-500 w-fit m-auto"
      >
        Authors
      </p>
      <p class="text-sm text-gray-600 text-center mb-10">
        Meet the team behind this study
      </p>

      <div
        id="authors-info"
        class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-5 mt-5"
      ></div>
    </section>

    <footer class="text-center border-t-1 border-t-gray-200 py-5">
      <p class="text-sm/8">
        &copy; 2025 Group 1 - Polytechnic University of the Philippines
        <br />Developed for Research Purposes<br />Email us at
        <span class="font-bold">thesisfasterrcnn@gmail.com</span>
      </p>
    </footer>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script src="{{ url_for('static', filename='js/components/card.js') }}"></script>
  <script src="{{ url_for('static', filename='js/components/list.js') }}"></script>
</html>
